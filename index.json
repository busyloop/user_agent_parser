{"repository_name":"github.com/busyloop/user_agent_parser","body":"# user_agent_parser\n\n[![Build Status](https://travis-ci.com/busyloop/user_agent_parser.svg?branch=master)](https://travis-ci.com/busyloop/user_agent_parser)\n[![GitHub release](https://img.shields.io/github/release/busyloop/user_agent_parser.svg)](https://github.com/busyloop/user_agent_parser/releases)\n[![Docs](https://img.shields.io/badge/docs-available-brightgreen.svg)](<https://busyloop.github.io/user_agent_parser/>)\n\nA crystal shard for parsing user agent strings using the BrowserScope pattern library.\nIt automatically fetches the latest version of [BrowserScope's parsing patterns](https://github.com/ua-parser/uap-core)\nat compile time and inlines them with your compiled binary.\n\n## Installation\n\nAdd this to your application's `shard.yml`:\n\n```yaml\ndependencies:\n  user_agent_parser:\n    github: busyloop/user_agent_parser\n```\n\n## Usage\n\n```crystal\nrequire \"user_agent_parser\"\n\n## ** OPTIONAL **\n## Load BrowserScope parsing patterns.\n## If you don't do this then the builtin version\n## that was present at compile-time is used.\n\n# UserAgent.load_regexes(File.read(\"regexes.yaml\"))\n\n# 1. Parse a user agent string\nua = UserAgent.new(\"Mozilla/5.0 (Linux; Android 7.0; SM-G892A Build/NRD90M; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/60.0.3112.107 Mobile Safari/537.36\")\n\n# 2. Inspect the result\nputs ua.family # => Chrome Mobile WebView\nputs ua.version # => 60.0.3112\n\nputs ua.device # => UserAgent::Device(@model=\"SM-G892A\", @brand=\"Samsung\", @name=\"Samsung SM-G892A\")\n\nputs ua.os # => UserAgent::Os(@family=\"Android\", @version=#<SemanticVersion:0x10c1c97e0 @major=7, @minor=0, @patch=0, @build=nil, @prerelease=SemanticVersion::Prerelease(@identifiers=[])>)\n```\n\n## Documentation\n\n* [API Documentation](https://busyloop.github.io/user_agent_parser/)\n\n\n## Automatic updates\n\nBy default this shard downloads the latest version of [BrowserScope's parsing patterns](https://github.com/ua-parser/uap-core)\nat compile time and inlines it with your binary.\n\nThis ensures you get the latest version every time you re-compile your app.\n\nIf you wish to update without recompiling your app, you can also\nload a new `regexes.yml` at runtime via `UserAgent.load_regexes(\"..yaml string..\")`.\n\n## Contributing\n\n1. Fork it (<https://github.com/busyloop/user_agent_parser/fork>)\n2. Create your feature branch (`git checkout -b my-new-feature`)\n3. Commit your changes (`git commit -am 'Add some feature'`)\n4. Push to the branch (`git push origin my-new-feature`)\n5. Create a new Pull Request\n\n","program":{"html_id":"github.com/busyloop/user_agent_parser/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"github.com/busyloop/user_agent_parser","program":true,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"DEVICE_REPLACEMENT_KEYS","name":"DEVICE_REPLACEMENT_KEYS","value":"[\"device_replacement\", \"model_replacement\", \"brand_replacement\"] of ::String","doc":null,"summary":null},{"id":"FAMILY_REPLACEMENT_KEYS","name":"FAMILY_REPLACEMENT_KEYS","value":"[\"family_replacement\", \"v1_replacement\", \"v2_replacement\", \"v3_replacement\"] of ::String","doc":null,"summary":null},{"id":"OS_REPLACEMENT_KEYS","name":"OS_REPLACEMENT_KEYS","value":"[\"os_replacement\", \"os_v1_replacement\", \"os_v2_replacement\", \"os_v3_replacement\"] of ::String","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/busyloop/user_agent_parser/UserAgent","path":"UserAgent.html","kind":"class","full_name":"UserAgent","name":"UserAgent","abstract":false,"superclass":{"html_id":"github.com/busyloop/user_agent_parser/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/busyloop/user_agent_parser/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/busyloop/user_agent_parser/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"user_agent_parser.cr","line_number":25,"url":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr"}],"repository_name":"github.com/busyloop/user_agent_parser","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"load_regexes(regexes_yaml)-class-method","html_id":"load_regexes(regexes_yaml)-class-method","name":"load_regexes","doc":"Load [Browserscope pattern library](https://github.com/ua-parser/uap-core) from String.","summary":"<p>Load <a href=\"https://github.com/ua-parser/uap-core\" target=\"_blank\">Browserscope pattern library</a> from String.</p>","abstract":false,"args":[{"name":"regexes_yaml","doc":null,"default_value":"","external_name":"regexes_yaml","restriction":""}],"args_string":"(regexes_yaml)","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L111","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L111","def":{"name":"load_regexes","args":[{"name":"regexes_yaml","doc":null,"default_value":"","external_name":"regexes_yaml","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Parser.instance(regexes_yaml)"}}],"constructors":[{"id":"new(user_agent_string)-class-method","html_id":"new(user_agent_string)-class-method","name":"new","doc":"Parse *user_agent_string* using the [Browserscope pattern library](https://github.com/ua-parser/uap-core).","summary":"<p>Parse <em>user_agent_string</em> using the <a href=\"https://github.com/ua-parser/uap-core\" target=\"_blank\">Browserscope pattern library</a>.</p>","abstract":false,"args":[{"name":"user_agent_string","doc":null,"default_value":"","external_name":"user_agent_string","restriction":""}],"args_string":"(user_agent_string)","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L116","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L116","def":{"name":"new","args":[{"name":"user_agent_string","doc":null,"default_value":"","external_name":"user_agent_string","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(user_agent_string)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"device:Device?-instance-method","html_id":"device:Device?-instance-method","name":"device","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Device?","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L107","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L107","def":{"name":"device","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Device | ::Nil","visibility":"Public","body":"@device"}},{"id":"family:String?-instance-method","html_id":"family:String?-instance-method","name":"family","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L105","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L105","def":{"name":"family","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@family"}},{"id":"os:Os?-instance-method","html_id":"os:Os?-instance-method","name":"os","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Os?","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L108","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L108","def":{"name":"os","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Os | ::Nil","visibility":"Public","body":"@os"}},{"id":"user_agent:String-instance-method","html_id":"user_agent:String-instance-method","name":"user_agent","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L104","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L104","def":{"name":"user_agent","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@user_agent"}},{"id":"version:SemanticVersion?-instance-method","html_id":"version:SemanticVersion?-instance-method","name":"version","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : SemanticVersion?","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L106","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L106","def":{"name":"version","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"SemanticVersion | ::Nil","visibility":"Public","body":"@version"}}],"macros":[],"types":[{"html_id":"github.com/busyloop/user_agent_parser/UserAgent/Device","path":"UserAgent/Device.html","kind":"struct","full_name":"UserAgent::Device","name":"Device","abstract":false,"superclass":{"html_id":"github.com/busyloop/user_agent_parser/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"github.com/busyloop/user_agent_parser/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"github.com/busyloop/user_agent_parser/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"github.com/busyloop/user_agent_parser/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"user_agent_parser.cr","line_number":57,"url":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr"}],"repository_name":"github.com/busyloop/user_agent_parser","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/busyloop/user_agent_parser/UserAgent","kind":"class","full_name":"UserAgent","name":"UserAgent"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(model:String?=nil,brand:String?=nil,name:String?=nil)-class-method","html_id":"new(model:String?=nil,brand:String?=nil,name:String?=nil)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"model","doc":null,"default_value":"nil","external_name":"model","restriction":"String | ::Nil"},{"name":"brand","doc":null,"default_value":"nil","external_name":"brand","restriction":"String | ::Nil"},{"name":"name","doc":null,"default_value":"nil","external_name":"name","restriction":"String | ::Nil"}],"args_string":"(model : String? = <span class=\"n\">nil</span>, brand : String? = <span class=\"n\">nil</span>, name : String? = <span class=\"n\">nil</span>)","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L57","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L57","def":{"name":"new","args":[{"name":"model","doc":null,"default_value":"nil","external_name":"model","restriction":"String | ::Nil"},{"name":"brand","doc":null,"default_value":"nil","external_name":"brand","restriction":"String | ::Nil"},{"name":"name","doc":null,"default_value":"nil","external_name":"name","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(model, brand, name)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"brand:String?-instance-method","html_id":"brand:String?-instance-method","name":"brand","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":null,"source_link":null,"def":{"name":"brand","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@brand"}},{"id":"clone-instance-method","html_id":"clone-instance-method","name":"clone","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L57","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L57","def":{"name":"clone","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Device.new(@model.clone, @brand.clone, @name.clone)"}},{"id":"copy_with(model_model=@model,brand_brand=@brand,name_name=@name)-instance-method","html_id":"copy_with(model_model=@model,brand_brand=@brand,name_name=@name)-instance-method","name":"copy_with","doc":null,"summary":null,"abstract":false,"args":[{"name":"_model","doc":null,"default_value":"@model","external_name":"model","restriction":""},{"name":"_brand","doc":null,"default_value":"@brand","external_name":"brand","restriction":""},{"name":"_name","doc":null,"default_value":"@name","external_name":"name","restriction":""}],"args_string":"(model _model = @model, brand _brand = @brand, name _name = @name)","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L57","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L57","def":{"name":"copy_with","args":[{"name":"_model","doc":null,"default_value":"@model","external_name":"model","restriction":""},{"name":"_brand","doc":null,"default_value":"@brand","external_name":"brand","restriction":""},{"name":"_name","doc":null,"default_value":"@name","external_name":"name","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Device.new(_model, _brand, _name)"}},{"id":"model:String?-instance-method","html_id":"model:String?-instance-method","name":"model","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":null,"source_link":null,"def":{"name":"model","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@model"}},{"id":"name:String?-instance-method","html_id":"name:String?-instance-method","name":"name","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":null,"source_link":null,"def":{"name":"name","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@name"}}],"macros":[],"types":[]},{"html_id":"github.com/busyloop/user_agent_parser/UserAgent/Os","path":"UserAgent/Os.html","kind":"struct","full_name":"UserAgent::Os","name":"Os","abstract":false,"superclass":{"html_id":"github.com/busyloop/user_agent_parser/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"github.com/busyloop/user_agent_parser/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"github.com/busyloop/user_agent_parser/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"github.com/busyloop/user_agent_parser/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"user_agent_parser.cr","line_number":79,"url":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr"}],"repository_name":"github.com/busyloop/user_agent_parser","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/busyloop/user_agent_parser/UserAgent","kind":"class","full_name":"UserAgent","name":"UserAgent"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(family:String?=nil,version:SemanticVersion?=nil)-class-method","html_id":"new(family:String?=nil,version:SemanticVersion?=nil)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"family","doc":null,"default_value":"nil","external_name":"family","restriction":"String | ::Nil"},{"name":"version","doc":null,"default_value":"nil","external_name":"version","restriction":"SemanticVersion | ::Nil"}],"args_string":"(family : String? = <span class=\"n\">nil</span>, version : SemanticVersion? = <span class=\"n\">nil</span>)","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L79","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L79","def":{"name":"new","args":[{"name":"family","doc":null,"default_value":"nil","external_name":"family","restriction":"String | ::Nil"},{"name":"version","doc":null,"default_value":"nil","external_name":"version","restriction":"SemanticVersion | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(family, version)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"clone-instance-method","html_id":"clone-instance-method","name":"clone","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L79","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L79","def":{"name":"clone","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Os.new(@family.clone, @version.clone)"}},{"id":"copy_with(family_family=@family,version_version=@version)-instance-method","html_id":"copy_with(family_family=@family,version_version=@version)-instance-method","name":"copy_with","doc":null,"summary":null,"abstract":false,"args":[{"name":"_family","doc":null,"default_value":"@family","external_name":"family","restriction":""},{"name":"_version","doc":null,"default_value":"@version","external_name":"version","restriction":""}],"args_string":"(family _family = @family, version _version = @version)","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L79","source_link":"https://github.com/busyloop/user_agent_parser/blob/8494d34600010e254586302ef32ff1716ee11796/src/user_agent_parser.cr#L79","def":{"name":"copy_with","args":[{"name":"_family","doc":null,"default_value":"@family","external_name":"family","restriction":""},{"name":"_version","doc":null,"default_value":"@version","external_name":"version","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Os.new(_family, _version)"}},{"id":"family:String?-instance-method","html_id":"family:String?-instance-method","name":"family","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":null,"source_link":null,"def":{"name":"family","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@family"}},{"id":"version:SemanticVersion?-instance-method","html_id":"version:SemanticVersion?-instance-method","name":"version","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : SemanticVersion?","source_link":null,"source_link":null,"def":{"name":"version","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"SemanticVersion | ::Nil","visibility":"Public","body":"@version"}}],"macros":[],"types":[]}]}]}}